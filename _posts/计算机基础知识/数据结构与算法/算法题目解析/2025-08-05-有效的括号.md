---
layout: post
title:  "LeetCode: 20.有效的括号"
date:   2025-08-05 22:47:14 +0800
categories: LeetCode 算法

---

## 20.有效的括号

### 题目描述

```
给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串 s ，判断字符串是否有效。
有效字符串需满足：
    左括号必须用相同类型的右括号闭合。
    左括号必须以正确的顺序闭合。
    每个右括号都有一个对应的相同类型的左括号。
```

### 思考：

1、对初始条件初始化：建立闭括号到开括号的映射字典；初始化一个空栈

2、遍历字符串，遇到闭括号：检查栈顶是否匹配，栈空 或 栈顶不匹配 → 立即返回 `False`；遇到开括号，直接入栈；

3、遍历后检查栈，如果栈为空，表明所有括号正确匹配；反之则存在未匹配开括号。

##### Tips：

### 代码实现（Python）：

```python
class Solution:
    def isValid(self, s: str) -> bool:
        """验证括号字符串的有效性"""
        if not self._is_input_valid(s):
            return False
        
        stack = []
        for char in s:
            if self._is_open_bracket(char):
                stack.append(char)
            elif self._is_close_bracket(char):
                if not self._is_match_valid(stack, char):
                    return False
            else:
                # 遇到非法字符直接终止
                return False
                
        return self._is_stack_cleared(stack)

    # 以下为内部辅助方法 ==============================
    
    def _is_input_valid(self, s: str) -> bool:
        """验证输入有效性"""
        return isinstance(s, str) and len(s) > 0
    
    def _is_open_bracket(self, char: str) -> bool:
        """判断是否为开括号"""
        return char in {'(', '{', '['}
    
    def _is_close_bracket(self, char: str) -> bool:
        """判断是否为闭括号"""
        return char in {')', '}', ']'}
    
    def _get_matching_pair(self, close_bracket: str) -> str:
        """获取匹配的开括号"""
        mapping = {')': '(', '}': '{', ']': '['}
        return mapping[close_bracket]
    
    def _is_match_valid(self, stack: list, close_bracket: str) -> bool:
        """验证闭括号是否匹配栈顶元素"""
        if not stack:
            return False  # 栈空说明闭括号无匹配
        
        expected_open = self._get_matching_pair(close_bracket)
        actual_open = stack.pop()
        return expected_open == actual_open
    
    def _is_stack_cleared(self, stack: list) -> bool:
        """验证栈是否完全清空"""
        return len(stack) == 0
```